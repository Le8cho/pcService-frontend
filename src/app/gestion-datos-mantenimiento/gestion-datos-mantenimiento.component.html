
<!-- gestion-datos-mantenimiento.component.html -->
<div class="card">
  <h2 class="mb-4">Gesti贸n de Mantenimiento de Computadoras</h2>
  <p-toast></p-toast>

  <!-- Buscador y bot贸n nuevo -->
  <div class="flex justify-content-between align-items-center mb-4">
    <div class="p-inputgroup">
      <input 
        type="text" 
        pInputText 
        placeholder="Buscar por cliente o equipo..." 
        [(ngModel)]="searchTerm"
        (keyup.enter)="searchMantenimientos()"
        style="width: 300px;">
      <button 
        pButton 
        pRipple 
        type="button" 
        icon="pi pi-search" 
        class="p-button-primary"
        (click)="searchMantenimientos()">
      </button>
      <button 
        pButton 
        pRipple 
        type="button" 
        icon="pi pi-times" 
        class="p-button-secondary"
        (click)="clearSearch()"
        *ngIf="searchTerm">
      </button>
    </div>
    <button 
      pButton 
      pRipple 
      label="NUEVO" 
      icon="pi pi-plus" 
      class="p-button-success mb-3"
      (click)="openNew()">
    </button>
  </div>

  <p-table 
    #dt 
    [value]="mantenimientos" 
    [rows]="10" 
    [paginator]="true"
    [globalFilterFields]="['nombre_cliente','equipos','frecuencia']"
    [loading]="loading"
    responsiveLayout="scroll">
    <ng-template pTemplate="header">
      <tr>
        <th>Cliente</th>
        <th>Fecha Mantenimiento</th>
        <th>Descripci贸n</th>
        <th>Ingreso</th>
        <th>Egreso</th>
        <th>Frecuencia</th>
        <th>Pr贸xima Fecha</th>
        <th>Acciones</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-mantenimiento>
      <tr>
        <td>{{mantenimiento.nombre_cliente}}</td>
        <td>{{mantenimiento.fecha | date:'dd/MM/yyyy'}}</td>
        <td>{{mantenimiento.equipos}}</td>
        <td>{{mantenimiento.ingreso | number}}</td>
        <td>{{mantenimiento.egreso | number}}</td>
        <td>{{mantenimiento.frecuencia}}</td>
        <td>{{mantenimiento.prox_mantenimiento | date:'dd/MM/yyyy'}}</td>
        <td>
          <button 
            pButton 
            pRipple 
            icon="pi pi-pencil" 
            class="p-button-rounded p-button-success mr-2" 
            (click)="editMantenimiento(mantenimiento)"
            pTooltip="Editar">
          </button>
          <button 
            pButton 
            pRipple 
            icon="pi pi-trash" 
            class="p-button-rounded p-button-warning" 
            (click)="deleteMantenimiento(mantenimiento)"
            pTooltip="Eliminar">
          </button>
        </td>
      </tr>
    </ng-template>
  </p-table>
  <p-confirmDialog [style]="{width: '425px'}"></p-confirmDialog>
</div>

<!-- Dialog y toast se mantienen igual -->

